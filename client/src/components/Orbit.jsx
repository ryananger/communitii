import React, {useState, useEffect, useRef} from 'react';

const Orbit = () => {
    const [vis, setVis] = useState('hidden');
    const imageSize = window.innerHeight/12;
    const mod = window.innerWidth < 1000 ? 0.6 : 1.5;
    const containerRef = useRef(null);
    const minRadius = 80;
    const orbitRadii = function() {
      var radii = [];

      for (var i = 0; i < 5; i++) {
        if (i === 0) {
          radii.push(Math.floor(minRadius + Math.random() * (imageSize)));
        } else {
          radii.push(Math.floor((radii[i - 1] + (mod * imageSize)) + Math.random() * (imageSize)));
        }
      }

      return radii;
    }();

    const imgStyle = {
      position: 'absolute',
      width: `${imageSize}px`,
      height: `${imageSize}px`,
      backgroundColor: 'var(--banana)',
      borderRadius: '50%',
      transform: 'translate(-50%, -50%)',
      fill: 'var(--peach)'
    };

    const orbitStyle = {
      position: 'absolute',
      border: '1px solid var(--trPeach)',
      borderRadius: '50%',
      top: '50%',
      left: '50%',
      transform: 'translate(-50%, -50%)'
    };

    var renderOrbitPaths = function() {
      return orbitRadii.map((radius, i) => (
        <div key={i} style={{...orbitStyle, width: `${2*radius}px`, height: `${2*radius}px`}}/>
      ));
    };

    var renderImages = function() {
        var rendered = [];

        for (var key in icons) {
          rendered.push(<div style={imgStyle}>{icons[key]}</div>);
        }

        return rendered;
    };

    useEffect(() => {
        if (!containerRef.current) {return};
        if (vis === 'hidden') {
          setTimeout(()=>{setVis('visible')}, 4000);
          return;
        };

        const container = containerRef.current;
        const children  = container.children;
        const centerX   = container.offsetWidth / 2;
        const centerY   = container.offsetHeight / 2;

        const rotateImages = function() {
          for (let i = 0; i < children.length; i++) {
            const angle = (2 * Math.PI / 5) * i + (Date.now() / 5000);
            const x = centerX + orbitRadii[i] * Math.cos(angle);
            const y = centerY + orbitRadii[i] * Math.sin(angle);

            children[i].style.left = `${x}px`;
            children[i].style.top = `${y}px`;
          }
        };

        setInterval(rotateImages, 16);  // Update every 16ms for 60fps
    }, [vis]);

    return (
      <div className={`${vis}`} style={{zIndex: '0', transition: 'opacity 2s'}}>
        <div style={{position: 'relative'}}>
            {renderOrbitPaths()}
        </div>
        <div ref={containerRef} style={{position: 'relative'}}>
            {renderImages()}
        </div>
      </div>
    );
};

const icons = {
  a: (
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 117.05 117.05">
      <path d="m58.53,0C26.2,0,0,26.2,0,58.53s26.2,58.53,58.53,58.53,58.53-26.2,58.53-58.53S90.85,0,58.53,0Zm-.41,74.79c.02,4.54-6.6,4.08-7.09-.09-.59-5.06,7.07-4.84,7.09.09Zm-22.53-54.98c2,.18,3.78.89,5.55,1.81,1.05.54,1.98,1.16,3.2,1.09,1.5-.08,3.06-1.01,4.48-1.43,2.23-.67,4.55-1.04,6.88-.8q.8,2.88.49,4.9c-2.39.36-7.26.38-8.98,2.3.59,4.08,1.39,7.79-.45,11.68-1.52,3.2-4.33,5.64-7.64,6.86-8.81,3.25-17.82-3.36-18.23-12.53-.36-7.85,6.93-14.56,14.7-13.87Zm12.04,42.47c-1.26-.19-.41-1.25,0-1.81.41.44,1.79,2.08,0,1.81Zm.81,33.74c-4.37-1.22-8.51-3.25-12.21-5.88-7.2-5.11-11.42-12.06-14.68-20.09-10.2,0-6.12-4.69-3.82-8.21,1.13-1.73,3.12-5.03,5.45-5.3,2.32-.27,3.96,2.64,5.1,4.19,1.91,2.61,6.63,9.17-1.15,9.17,2.17,6.5,6.65,12.29,12.28,16.2,6.5,4.52,13.51,5.63,21.24,6.23.2,1.62.39,3.07.57,4.51-1.61.72-10.7-.23-12.78-.81Zm11.46-70.72c-.13-1.65-.25-3.26-.37-4.83q1.38-.45,3.23.16c.46,1.5.31,3.01-.06,4.76-1.03.09-1.79.12-2.79-.09Zm3.37,71.27c-.26-1.31-.98-3.22-.34-4.23.27-.43.78-.69,1.66-.68,2.19.02,2.36,2.55,2.99,4.29-.57.3-2.9.96-4.31.62Zm2.51-28.21c-2.87.1-2.98-4.78.01-4.66,2.86.11,2.87,4.57-.01,4.66Zm20.33,22.3c-1.78.6-4.8.54-5.58.63-.62.08-1.2.44-1.81.66-2.53.89-5.04,2.25-7.7,2.83-.98-1.47-1.1-2.56-1.82-4.03,2.05-1.36,4.49-1.65,6.25-3.29-1.11-2.67-2.12-5.15-1.14-8.04.79-2.34,2.67-4.51,4.92-5.55,4.91-2.27,10.08.64,11.99,5.37,1.82,4.51-.37,9.83-5.1,11.42Zm12.22-31.49c-2.79,2.87-4.15,5.08-7,2.33-2.19-2.12-5.23-6.04-6.31-8.9-.91-2.69,2.6-3.26,5.55-3.19-1.41-6.56-5.78-12.72-11.02-16.82-2.67-2.09-5.67-3.77-8.83-5-1.32-.52-4.05-.66-5.14-1.53-1.25-1-.74-3.62-.33-4.94,2.78-1.2,8.7,2.12,11.23,3.41,3.14,1.61,6.07,3.63,8.64,6.04,5.45,5.11,8.89,11.66,11.13,18.7,10,0,4.92,6.66,2.06,9.91Z"/>
    </svg>
  ),
  b: (
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 117.05 117.05">
      <path d="m55.6,43.28c-2.25-.4-2.41,1.91-.03,1.89,1.67-.22,1.61-1.61.03-1.89Z"/>
      <path d="m69.27,46.85c.74,1,6.38,4.81,7.49,3.16.93-1.38-6.03-5.93-7.49-3.16Z"/>
      <path d="m79.57,42.5c.2.51.05.43.83.32-.23-.56-.06-.53-.83-.32Z"/>
      <path d="m32.78,51.26c0,4.53,7.15,4.35,7.09-.11-.06-4.49-7.1-4.43-7.09.11Z"/>
      <path d="m30.8,60.88c-1.61-.68-3,4.38-1.96,5.51,1.4-.26,3.88-4.7,1.96-5.51Z"/>
      <path d="m85.52,55c-4.12-.13-3.91,5.81.12,5.66,3.62-.13,3.4-5.55-.12-5.66Z"/>
      <path d="m58.53,0C26.2,0,0,26.2,0,58.53s26.2,58.53,58.53,58.53,58.53-26.2,58.53-58.53S90.85,0,58.53,0ZM17.88,41.98c.13-4.32,1.08-9.37,4.8-12.09,3.85-2.81,9.16-2.12,13.64-2.12,12.48,0,24.97,0,37.45-.01,2.79,0,5.59,0,8.38,0,3.02,0,6.26-.31,9.18.59,4.97,1.53,6.93,5.58,7.69,10.38.98,6.23.31,12.93.3,19.22,0,6.67.14,13.37-.15,20.03-2.93.36-3.64-.36-3.88-3.38-.23-2.83-.04-5.74-.02-8.57.03-5.72.08-11.43.08-17.15,0-2.63-.06-5.25-.1-7.88-.03-2.2-.04-3.88-2.35-4.7-5.05-1.8-11.42-.95-16.68-.95-11.39-.01-22.78.03-34.16.02-5.31,0-11.27-.78-16.45.53-1.89.48-3.2,1.07-3.6,3.08-.51,2.62-.11,5.71-.11,8.37,0,6.68.03,13.37.04,20.05,0,2.71.32,5.59-.02,8.28-.29,2.27-1.62,2.61-3.74,2.24-.78-5.95-.35-12.14-.35-18.14,0-5.93-.12-11.87.05-17.8Zm76.41,32.67c-.04,1.66.09,3.03-1.74,3.48-2.33.58-6.08.41-8.33-.26.07-4.72.27-9.37-1.91-13.58-1.52-.41-2.63,1.29-4.02.82-1.22-.41-2.05-3.06-2.54-4.09.72-.81,2.37-2.08,2.36-3.25,0-1.25-1.78-2.41-2.61-3.14-2.66-2.33-5.65-3.76-8.76-5.37-1.5.7-1.61,2.07-2.22,3.21-1.58.54-4.64.73-6.1-.2-1.41-.89-1.39-2.56-1.64-4.07-4.82,0-9.01,1.53-13.09,4.12.13,1.29.72,3.31.45,4.6-.29,1.4-1.89,2.24-2.92,3.1-1.65-.21-2.07-1.86-3.34-2.27-3.35,3.53-5.96,10.22-5.44,14.11.99.3,2.51.48,3.23,1.28.94,1.04.74,2.97.88,4.27-1,.65-2.15.29-3.33.36-1.37.08-2.71.32-4.08.41-1.8.11-4.93.72-5.94-1.04-1.08-1.89-.29-6.2-.3-8.32,0-3.3,0-6.6-.01-9.9,0-3.12,0-6.23-.01-9.35,0-2.83-.43-5.91.01-8.71.95-6.01,8.76-4.2,13.16-4.2,12.97,0,25.94.02,38.91-.02,2.96,0,5.93-.02,8.89-.03,2.62-.01,6.09-.69,8.38.88,2.12,1.46,2.31,3.51,2.19,5.87-.15,3.18-.13,6.37-.14,9.55-.02,7.24.14,14.5-.02,21.74Zm-34.54-13.94c-9.11-.96-17.15,8.02-13.8,16.89-1.59.6-4.71.62-7.03.03-1.12-1.67.38-3.97-.55-5.6-.66-1.16-2.48-1.23-3.63-1.67,0-2.54.69-4.93,1.93-7.17,1.49-2.68,2.59-1.98,4.81-.46,1.02-.1,1.42-.9,2.05-1.56.93-.97,2.03-1.76,3.08-2.59.57-1.61-.28-2.89-1.13-4.48,2.48-1.69,5.32-3.29,8.37-3.64,2.67-.31,2.98,1.65,3.58,3.87,2.55.49,4.97.96,7.58,1.46.44-1.1.93-2.31,1.36-3.39,2.18-1.22,5.66,2.19,7.27,3.42,2.54,1.95,1.35,3.5,0,5.94.85,1.52,1.7,3.03,2.64,4.7,1.85.17,4.27-.09,5.26,1.81.59,1.13,1.39,6.32.53,7.37-.81.99-3.21.75-4.37,1.51-1.84,1.2-4.38,1.1-6.57.59,1.6-7.93-2.7-16.11-11.37-17.02Zm40.64,27.91c-2.43,1.82-6.77,1.02-9.59,1.02-3.67,0-7.34,0-11.01,0-7.34,0-14.68,0-22.02,0v.02c-12.81,0-25.62.16-38.43,0-2.34-.03-3.79-.6-4.36-3.06-.75-3.23,1.44-4.57,4.3-4.89,6.03-.66,12.35-.59,18.41-.61,12.71-.04,25.44,0,38.15.1,6.29.05,12.57.22,18.86.36,2.13.05,5.17-.04,6.76,1.67,1.53,1.64.53,4.2-1.07,5.4Z"/>
    </svg>
  ),
  c: (
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 117.05 117.05">
      <path d="m57.9,34.97c-2.81-.54-3.26,2.52-3.45,4.55-.28,2.87-.51,5.72-.88,8.58-2.38.55-5,.22-7.44.19-.54-2.57,1.44-14.38-4.39-11.47-2.22,1.11-4.15,3.06-4.25,5.54-.12,2.93.06,5.9.12,8.84.07,4.01-1.22,12.68,3.75,14.33,6.14,2.04,4.79-7.32,5.08-10.62,2.33.04,4.46-.25,6.53.26,1.26,2.04-1.84,14.31,4.52,11.26,2.44-1.17,1.89-4.57,1.91-6.77.03-3.01.18-6.01.37-9.01.2-3.17,2.71-14.8-1.88-15.68Z"/>
      <path d="m70.2,47.29c-4.52-.3-3.63,6.31-3.63,9.12h-.03c0,3.13-1.12,9.5,3.49,9.9,4.56.39,3.64-5.71,3.58-8.5-.07-2.85.94-10.22-3.41-10.51Z"/>
      <path d="m58.53,0C26.2,0,0,26.2,0,58.53s26.2,58.53,58.53,58.53,58.53-26.2,58.53-58.53S90.85,0,58.53,0Zm26.73,77.12c-2.3,1.21-2.52,1.76-3,4.32-.47,2.49-1.34,4.88-2.45,7.16-1.81,3.71-5.12,9.14-9.22,10.65.41-3.24,1.56-6.35,1.92-9.65.32-2.92,1.23-6.27-1.03-8.62-16.76,0-37.46,3.8-49.69-10.63-9.77-11.52-9.2-29.04,1.31-39.92,5.97-6.19,14.48-9.16,22.97-9.34,5.21-.11,10.43-.08,15.65-.06,4.84.02,9.76-.17,14.53.77,16.62,3.3,27.94,19.85,23.76,36.5-2,7.97-7.46,14.99-14.74,18.83Z"/>
      <path d="m69.19,32.99c-7.02-.09-6.27,10.84.18,10.74,6.35-.1,6.3-10.66-.18-10.74Z"/>
    </svg>
  ),
  d: (
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 117.05 117.05">
       <path d="m58.53,0C26.2,0,0,26.2,0,58.53s26.2,58.53,58.53,58.53,58.53-26.2,58.53-58.53S90.85,0,58.53,0Zm19.99,12.27c.38-3.27,5.4-2.98,5.5.32.12,3.99-5.95,3.56-5.5-.32Zm-5.89,45.43c-.1,7.6-6.42,14.6-14.89,14.6-7.8,0-14.83-6.38-14.73-15,.11-9.22,8.08-14.85,14.89-14.54,7.11-.34,14.85,6.1,14.73,14.94Zm-61.35-11.27c-2.15.36-2.58-2.95-.36-3.04,1.86-.08,2.2,2.73.36,3.04Zm1.4-6.67c-3.51-.67-1.57-5.81,1.49-5.78,4.36.31,1.75,6.4-1.49,5.78Zm12.31,44.27c-2.8-3.21-4.89-7.22-6.42-11.18-3.17-8.19-3.66-17.44-1.3-25.9,2.23-7.99,6.87-15.51,13.19-20.91,2.84-2.43,6.02-4.43,9.4-6,3.3-1.54,7.57-3.46,11.25-3.46,1.92,6.51,2.52,13.87,3.42,20.61-8.04,2.14-14.55,7.34-16.56,15.64-2.16,8.92,1.48,17.01,8.7,22.42-3.67,6.05-7.01,11.87-10.97,17.49-3.63-2.51-7.8-5.36-10.71-8.7Zm56.47,15.22c-.07-1.94,3.13-2.13,3.27-.23.17,2.15-3.19,2.32-3.27.23Zm-38.48-2.05c.72-3.28,2.26-6.44,3.43-9.57,1.29-3.42,2.35-7.14,4.09-10.36,7.63,2.04,14.77,1.6,21.18-3.69,4.75,5.34,9.3,10.61,13.94,16.07-10.9,10.76-28.77,13.05-42.64,7.56Zm56.24-29.78c-.35,1.48-.69,4.34-1.9,5.33-1.75-.27-17.15-6.26-19.56-7.64,1.23-5.95,1.68-11.83-1.43-17.33-3.4-5.99-8.92-8.88-15.35-10.6-.19-2.14,1.41-14.83,2.53-20.38,1.42-1.49,7.16.93,8.81,1.48,3.05,1.03,5.98,2.39,8.67,4.16,4.9,3.23,9.21,7.56,12.42,12.47,3.23,4.94,5.39,10.58,6.36,16.4.61,3.61.72,7.29.33,10.93-.19,1.73-.48,3.46-.88,5.15Z"/>
    </svg>
  ),
  e: (
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 117.05 117.05">
      <path d="m58.53,0C26.2,0,0,26.2,0,58.53s26.2,58.53,58.53,58.53,58.53-26.2,58.53-58.53S90.85,0,58.53,0Zm-13.47,97.45c-2.52.41-2.49-3.53-.11-3.53,2.14,0,2.11,3.2.11,3.53Zm18.51-4.08c-.11-2.48,3.89-2.6,4.04-.17.16,2.64-3.92,2.87-4.04.17Zm32-33.04c-4.95.1-9.91,0-14.86,0-.24,0-.55-.02-.9-.05h-3.69c-.32.07-.61.15-.82.3-1.11.78-.77,2.76-.76,3.92.01,1.37-.17,3.34,1.17,4.17,1.23.76,3.94.46,5.27.27,1.89-.27,3.01-2.04,4.87-2.14,1.82-.1,3.39,1.15,3.78,2.91.39,1.76-.42,3.5-2.09,4.22-2.33,1-3.88-.63-5.36-2.18-1.84,0-7.77,1.03-9.02-.62-.74-.97-.29-3.21-.28-4.35.02-1.98.05-3.96.05-5.94-.42-.26-.83-.44-1.25-.55h-2c-1.19.36-2.12,1.39-2.4,2.87-.48,2.51-.51,5.93-.17,8.47.35,2.63,2.28,4.13,4.07,5.9,1.92,1.9,3.48,4.23,6.2,4.84,2.23.5,4.18,1.37,4.92,3.76.69,2.25-.33,4.9-2.47,5.97-2,1.01-4.56.36-6.06-1.24-2.03-2.17-.99-4.61.03-6.97-2.42-3-6.92-5.64-8.01-9.46-1.17-4.11-.37-9.43-.37-13.66-2-.56-4.87-.58-7-.11-.32,1.67-.44,13.28-.16,15.97,3.06,1.76,5.12,3.71,4.68,7.52-.36,3.09-2.7,6.07-6.03,6.12-3.13.04-5.9-2.5-6.59-5.44-.98-4.21,1.55-6.13,4.73-8.2.14-5.19-.08-10.55-.04-16.04-.44-.09-1.04-.2-1.71-.29h-3.91c-.78.16-1.42.47-1.76,1.01-1.08,1.71-.61,4.86-.65,6.75-.04,2.08.38,4.69-.25,6.7-.64,2.05-2.89,3.72-4.33,5.24.74,1.97,1.49,3.81,0,5.68-1.11,1.39-2.99,1.98-4.65,1.31-4.08-1.65-3.7-7.33.25-8.67,2.14-.72,3.23-1.17,4.91-2.8,1.52-1.47,2.6-2.23,2.69-4.4.1-2.54.14-5.42-.17-7.94-.23-1.83-.91-2.53-1.97-2.87h-3.45c-1.77,2.38-.85,7.55-.98,10.16-2.36,1.01-4.73.41-7.12.69-.75,1.88-1.87,3.84-4.26,3.34-2.02-.42-3.49-3.03-3.15-5.01.36-2.09,2.27-2.9,4.21-2.68,1.37.15,2.43.94,3.74,1.22,1.52.32,3.32.04,4.87.04.38-2.5-.03-4.87.06-7.07-.33-.38-.85-.58-1.43-.69h-3.43c-.24.01-.46.02-.66.02-1.15,0-2.3-.01-3.45-.02h-.03,0c-1.38,0-2.76-.02-4.14-.06-4.48-.12-8.2-.33-8.09-5.72.09-3.98,2.58-8.44,5.23-11.33,3.07-3.35,6.58-.2,9.76,1.44,1.13-.45,1.3-1.88,1.67-2.87.6-1.58,1.28-3.14,2.01-4.67,1.46-3.05,3.12-6.05,5.1-8.8,1.9-2.64,4.24-4.76,6.64-6.94,2.71-2.46,4.63-4.27,8.41-4.58,13.51-1.1,21.85,12.35,27.95,22.23,1.86.57,3.88-.07,5.79.23,1.61.26,3.08.97,4.29,2.05,3.16,2.82,4.84,7.49,6.32,11.33.62,1.61,2.24,4.26,1.24,6-.97,1.67-3.33,1.71-5.01,1.75Z"/>
    </svg>
  )
};

export default Orbit;